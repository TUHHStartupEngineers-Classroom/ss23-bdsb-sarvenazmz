{
  "hash": "66c8dffd6f65fdb0945be73d74d7974e",
  "result": {
    "markdown": "---\ntitle: \"Data Acquisition\"\nauthor: \"Sarvenaz Mostafazadeh\"\n---\n\n\n# Data Acquisition Challenge-1\n\n\n::: {.cell hash='02_data_acquisition_cache/html/plot_2468b520e473937574b2ccdc555149ca'}\n\n```{.r .cell-code}\n##----1.libraries----\nlibrary(rvest)\nlibrary(tibble)\nlibrary(httr)\nlibrary(ggplot2)\n\n##----2.read the data----\nurl <- \"https://www.boxofficemojo.com/year/world/2022/\"\nresp <- GET(url)\nhtml <- content(resp)\n\n##----3.Top 10 Movies by Sales-2022----\n\n#3.1.Getting the rank----\nrank <- html %>% \n  html_nodes(\".a-text-right.mojo-header-column.mojo-truncate.mojo-field-type-rank.mojo-sort-column\") %>% \n  html_text() %>% \n  as.numeric()\n\n#3.2.Getting the title----\ntitle <- html %>% \n  html_nodes(\".a-text-left.mojo-field-type-release_group a\") %>% \n  html_text()\n\n#3.3.Getting the number of sales----\nsale <- html %>%\n  html_nodes(\"td.a-text-right.mojo-field-type-money\") %>%\n  html_text() \n\n#3.4.Creating a tibble----\nmovie_tbl <- tibble(\n  rank = rank[1:10], \n  title = title[1:10], \n  sale = sale[1:10])\nmovie_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"rank\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"title\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sale\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"1\",\"2\":\"Avatar: The Way of Water\",\"3\":\"$2,319,935,105\"},{\"1\":\"2\",\"2\":\"Top Gun: Maverick\",\"3\":\"$684,060,555\"},{\"1\":\"3\",\"2\":\"Jurassic World: Dominion\",\"3\":\"$1,635,874,550\"},{\"1\":\"4\",\"2\":\"Doctor Strange in the Multiverse of Madness\",\"3\":\"$1,493,491,858\"},{\"1\":\"5\",\"2\":\"Minions: The Rise of Gru\",\"3\":\"$718,732,821\"},{\"1\":\"6\",\"2\":\"Black Panther: Wakanda Forever\",\"3\":\"$774,759,037\"},{\"1\":\"7\",\"2\":\"The Batman\",\"3\":\"$1,001,978,080\"},{\"1\":\"8\",\"2\":\"Thor: Love and Thunder\",\"3\":\"$376,851,080\"},{\"1\":\"9\",\"2\":\"Water Gate Bridge\",\"3\":\"$625,127,000\"},{\"1\":\"10\",\"2\":\"Puss in Boots: The Last Wish\",\"3\":\"$955,775,804\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#3.6.A bar plot for the sales----\nggplot(movie_tbl, aes(x = title, y = sale)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(x = \"Movie Title\", y = \"Sales\") +\n  ggtitle(\"Top 10 Movies by Sales (2022)\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](02_data_acquisition_files/figure-html/plot-1.png){width=960}\n:::\n:::\n\n\n# Data Acquisition Challenge-2\n\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-1_31cf2337cc5761e7ef7a12323e63982e'}\n\n```{.r .cell-code}\n##----.Libraries\nlibrary(tidyverse)\nlibrary(rvest)\n\n##----1.Read in the HTML for the entire webpage of the \"bikes\" section----\nhtml_family <- read_html(\"https://www.rosebikes.com/bikes/\")\n\n#1.1.Web scrape the URLs for each bike family\nbike_family_tbl <- html_family %>%\n  html_nodes(css = \".catalog-navigation__list .catalog-navigation__list-item .catalog-navigation__link\") %>%\n  html_attr(\"href\") %>%\n  str_replace_all(\"^/\", \"https://www.rosebikes.com/\") %>%\n  as_tibble() %>%\n  rename(URL = value)\n\n#1.2.Print the tibble of the URLs\nbike_family_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"URL\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"https://www.rosebikes.com/bikes/mtb\"},{\"1\":\"https://www.rosebikes.com/bikes/road\"},{\"1\":\"https://www.rosebikes.com/bikes/gravel\"},{\"1\":\"https://www.rosebikes.com/bikes/hybrid\"},{\"1\":\"https://www.rosebikes.com/bikes/fitness\"},{\"1\":\"https://www.rosebikes.com/bikes/touring\"},{\"1\":\"https://www.rosebikes.com/bikes/urban\"},{\"1\":\"https://www.rosebikes.com/bikes-with-short-delivery-times-road\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n##----2.Read in the HTML for the entire webpage of the \"family\" section----\nbike_subfamily_url <- bike_family_tbl$URL[2]\nhtml_subfamily <- read_html(bike_subfamily_url)\n\n#2.1.Web scrape the URLs for \"Road\" bike subfamily\nbike_subfamily_tbl <- html_subfamily %>%\n  html_nodes(css = \".catalog-category-bikes__picture-wrapper.columns.small-12.medium-6.mediumlarge-7.large-8.catalog-category-bikes__picture-wrapper--left\") %>%\n  html_attr(\"href\") %>%\n  {glue(\"https://www.rosebikes.com{.}\")} %>%\n  as_tibble() %>%\n  rename(URL = value)\n\n#2.2.Print the tibble of the URLs\nbike_subfamily_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"URL\"],\"name\":[1],\"type\":[\"glue\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"https://www.rosebikes.com/bikes/road/race/xlite\"},{\"1\":\"https://www.rosebikes.com/bikes/road/endurance/pro-sl\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n##----3.Read in the HTML for the entire webpage of the \"xlite\" category section----\nbike_category_url <- bike_subfamily_tbl$URL[1]\nhtml_category <- read_html(bike_category_url)\n\n#3.1.Extract bike name of \"xlite\" category\nname <- html_category %>%\n  html_nodes(css = \".basic-headline.basic-headline--no-margin.basic-headline--small.basic-headline--left .basic-headline__title\") %>%\n  html_text() \n\n#3.2.Extract bike price of \"xlite\" category and remove non-numeric characters\nprice <- html_category %>%\n  html_nodes(css = \".product-tile-price__current.catalog-category-model__price-current .product-tile-price__current-value.catalog-category-model__price-current-value\") %>%\n  html_text() %>%\n  gsub(\"[^0-9.]\", \"\", .) # remove non-numeric characters\n\n#3.3.Create tibble of the bikes in \"xlite\" category and format the price\nbike_category_tbl <- tibble(name = name, price = glue(\"{gsub(',', '', gsub('â‚¬', '', price))}\"))\n\n#3.4.Print tibble\nbike_category_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"price\"],\"name\":[2],\"type\":[\"glue\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"XLITE 04 105\",\"2\":\"2999.00\"},{\"1\":\"XLITE 04 Ultegra\",\"2\":\"3299.00\"},{\"1\":\"XLITE 04 105 Di2\",\"2\":\"3599.00\"},{\"1\":\"XLITE 04 Ultegra Di2\",\"2\":\"4599.00\"},{\"1\":\"XLITE 04 Force eTap AXS\",\"2\":\"4599.00\"},{\"1\":\"XLITE 04 Force AXS\",\"2\":\"4999.00\"},{\"1\":\"XLITE 06 Ultegra\",\"2\":\"3999.00\"},{\"1\":\"XLITE 06 Ultegra Di2\",\"2\":\"5999.00\"},{\"1\":\"XLITE 06 Force eTap AXS\",\"2\":\"5999.00\"},{\"1\":\"XLITE 06 Force AXS\",\"2\":\"6499.00\"},{\"1\":\"XLITE 06 Dura Ace Di2\",\"2\":\"7999.00\"},{\"1\":\"XLITE 06 Red eTap AXS\",\"2\":\"8199.00\"},{\"1\":\"XLITE 04 105\",\"2\":\"2999.00\"},{\"1\":\"XLITE 04 Ultegra\",\"2\":\"3299.00\"},{\"1\":\"XLITE 04 105 Di2\",\"2\":\"3599.00\"},{\"1\":\"XLITE 06 Ultegra\",\"2\":\"3999.00\"},{\"1\":\"XLITE 04 Ultegra Di2\",\"2\":\"4599.00\"},{\"1\":\"XLITE 04 Force eTap AXS\",\"2\":\"4599.00\"},{\"1\":\"XLITE 04 Force AXS\",\"2\":\"4999.00\"},{\"1\":\"XLITE 06 Ultegra Di2\",\"2\":\"5999.00\"},{\"1\":\"XLITE 06 Force eTap AXS\",\"2\":\"5999.00\"},{\"1\":\"XLITE 06 Force AXS\",\"2\":\"6499.00\"},{\"1\":\"XLITE 06 Dura Ace Di2\",\"2\":\"7999.00\"},{\"1\":\"XLITE 06 Red eTap AXS\",\"2\":\"8199.00\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}